<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Adex Holdings Trust | Admin</title>
  <meta name="robots" content="noindex,nofollow"/>

  <!-- HARD BLOCK: prevent preload of assets before hostname validation -->
  <script>
    (function () {
      const allowedHost = "admin.adexholdings.com";

      if (location.hostname !== allowedHost) {
        document.documentElement.innerHTML = `
          <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1"/>
            <meta name="robots" content="noindex,nofollow">
            <title>Access Restricted</title>
            <style>
              body {
                margin: 0;
                height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                background: #f5f6f8;
                font-family: Arial, Helvetica, sans-serif;
                color: #333;
              }
              .box {
                max-width: 560px;
                background: #ffffff;
                padding: 36px;
                border-radius: 10px;
                box-shadow: 0 12px 32px rgba(0,0,0,0.08);
                text-align: center;
              }
              h2 {
                margin-top: 0;
                margin-bottom: 12px;
              }
              p {
                line-height: 1.6;
                margin: 10px 0;
              }
            </style>
          </head>
          <body>
            <div class="box">
              <h2>Access Restricted</h2>
              <p>
                This account has no access to this page.
              </p>
              <p>
                Please use the appropriate link to access the required page or
                contact <b>Adex Holdings, LLC</b> or <b>Adex Holdings Trust</b>.
              </p>
            </div>
          </body>
        `;
        throw new Error("Unauthorized host");
      }
    })();
  </script>

  <!-- Assets load ONLY after hostname is validated -->
  <link rel="icon" href="assets/logo.png"/>
  <link rel="stylesheet" href="assets/styles.css"/>
</head>

<body>

<div class="container">

  <div class="nav">
    <a class="brand" href="index.html" aria-label="Home">
      <img src="assets/logo.png" alt="Adex Holdings Trust logo"/>
      <div>
        <div class="title">ADEX HOLDINGS TRUST</div>
        <div class="subtitle">Residential rentals & land holdings</div>
      </div>
    </a>
    <div class="navlinks">
      <a href="index.html">About</a>
      <a href="properties.html">Rental Properties</a>
      <a href="lands.html">Lands</a>
      <a href="tenant-portal.html">Tenant Portal</a>
      <a href="tenant-faq.html">Tenant FAQ</a>
      <a href="careers-vendors.html">Careers / Vendors</a>
      <a href="privacy.html">Privacy & Legal</a>
    </div>
  </div>

  <div class="card" style="margin-top:18px">
    <div class="kicker">Admin</div>
    <div class="h1" style="font-size:30px">Availability toggle</div>

    <div id="adminGate" class="notice" style="display:none">
      <b>Restricted page.</b> Enter the admin passcode to continue.
      <div class="row2" style="margin-top:12px">
        <div>
          <label for="adminPasscode">Passcode</label>
          <input id="adminPasscode" placeholder="Enter passcode"/>
        </div>
        <div style="display:flex;align-items:flex-end">
          <button id="adminLoginBtn" class="btn primary" type="button">Unlock</button>
        </div>
      </div>
      <div class="small">
        This is convenience only. Real protection is enforced by Cloudflare Access.
      </div>
    </div>

    <div id="adminWrap" style="display:none">
      <p class="lead">
        Set each rental to <b>Rented</b> or <b>Available</b>. Status is synced via Cloudflare Worker.
      </p>

      <div class="hr"></div>

      <div class="row2" style="margin-top:12px">
        <div>
          <label for="adminToken">Admin Token (Worker mode)</label>
          <input id="adminToken" placeholder="Paste Bearer token here"/>
        </div>
        <div>
          <label>Save mode</label>
          <div class="code" id="adminMode">Auto</div>
        </div>
      </div>

      <div class="hr"></div>

      <div id="adminList" class="form"></div>

      <div class="btnRow" style="margin-top:12px">
        <button id="saveBtn" class="btn primary" type="button">
          Save availability
        </button>
      </div>
    </div>
  </div>

  <div class="footer">
    <div class="hr"></div>
    <div style="display:flex;gap:14px;flex-wrap:wrap;align-items:center;justify-content:space-between">
      <div>
        <div><b>Adex Holdings Trust</b></div>
        <div class="small">
          Email:
          <a href="mailto:tenantservices@adexholdings.com">tenantservices@adexholdings.com</a>
          • Phone:
          <a href="tel:+19494154633">949-415-4633</a>
        </div>
        <div class="small">© 2025 Adex Holdings Trust. All rights reserved.</div>
      </div>
      <div class="small" style="text-align:right;max-width:520px">
        <div>
          <a href="privacy.html">Privacy</a> •
          <a href="privacy.html#terms">Terms</a> •
          <a href="privacy.html#disclaimer">Disclaimer</a>
        </div>
        <div>
          Information on this site is provided for general informational purposes
          and does not constitute legal or financial advice.
        </div>
      </div>
    </div>
  </div>

</div>

<div id="toast" class="notice"
     style="display:none;position:fixed;right:18px;bottom:18px;max-width:520px"></div>

<script src="assets/data.js"></script>
<script src="assets/app.js"></script>

</body>
</html>
